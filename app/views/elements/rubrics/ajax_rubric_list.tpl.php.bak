<!-- elements::ajax_user_list end -->
<div id="ajax_update">
<?php $pagination->loadingId = 'loading';?>
<div id="loading" style="position:absolute;left:52px; top:197px;display:none;"><?php echo $html->image('spinner.gif',array('align'=>'texttop'))?></div>
<?php if($pagination->set($paging)):?>
<?php endif;?>
<table width="95%" border="0" cellspacing="2" cellpadding="4">
	  <tr>
	    <td colspan="8">
      <?php
      echo $this->renderElement('evaltools/tools_menu', array());
      ?>
	    </td>
	    <td align="right" colspan="2">	<?php echo $pagination->show('Show ',null,'rubric_table')?></td>
	  </tr>
<tr class="tableheader">
	<?php if($rdAuth->role == 'A' || $rdAuth->role == 'I'):?>
	<th width="10%">Actions</th>
	<?php endif;?>
	<th width="24%"><?php echo $pagination->sortLink('Name',array('name','desc'))?></th>
	<th width="4%">In Use</th>
	<th width="4%"><?php echo $pagination->sortLink('Public',array('availability','desc'))?></th>
	<th width="4%"><?php echo $pagination->sortLink('LOM',array('lom_max','desc'))?></th>
	<th width="4%"><?php echo $pagination->sortLink('Criteria',array('criteria','desc'))?></th>
	<th width="4%"><?php echo $pagination->sortLink('Total Marks',array('total_marks','desc'))?></th>
	<th width="14%"><?php echo $pagination->sortLink('Created By',array('created','desc'))?></th>
	<th width="14%"><?php echo $pagination->sortLink('Last Updated By',array('modified','desc'))?></th>
  </tr>
  <tbody>
<?php $i = '0';?>
<?php 
foreach ($data as $row): $rubric = $row['Rubric']; ?>
<tr class="tablecell">
  <td align=center>
  <a href="<?php echo $this->webroot.$this->themeWeb.'rubrics/view/'.$rubric['id']?>"><?php echo $html->image('icons/view.gif',array('border'=>'0','alt'=>'View'))?></a>
  <?php if($rdAuth->role == 'A' || $rdAuth->role == 'I'):?>
  	<?php if ($rdAuth->id == $rubric['creator_id']): ?>
      <a href="<?php echo $this->webroot.$this->themeWeb.'rubrics/edit/'.$rubric['id']?>"><?php echo $html->image('icons/edit.gif',array('border'=>'0','alt'=>'Edit'))?></a>
    <?php else: ?>
      <?php echo $html->image('icons/editdisabled.gif',array('border'=>'0','alt'=>'Edit'))?>
    <?php endif;?>
    <?php if ($rdAuth->id == $rubric['creator_id']): ?>
      <a href="<?php echo $this->webroot.$this->themeWeb.'rubrics/delete/'.$rubric['id']?>"><?php echo $html->image('icons/delete.gif',array('border'=>'0','alt'=>'Delete'), 'Are you sure you want to delete rubric \"'. $rubric['name'] .'\"?')?></a>
    <?php else: ?>
       <?php echo $html->image('icons/deletedisabled.gif',array('border'=>'0','alt'=>'Delete'))?>
    <?php endif;?>
    <a href="<?php echo $this->webroot.$this->themeWeb.'rubrics/copy/'.$rubric['id']?>"><?php echo $html->image('icons/copy.gif',array('border'=>'0','alt'=>'Copy'))?></a>
  
  <?php endif;?>
  </td>
  <td>
  <?php echo $html->link($rubric['name'], '/rubrics/view/'.$rubric['id']) ?>
  </td>
  <td align=center>
	<?php
		if($rdAuth->checkEvaluationToolInUse('2', $rubric['id']))
			echo $html->image('icons/green_check.gif',array('border'=>'0'));
		else
			echo $html->image('icons/red_x.gif',array('border'=>'0'));
			
	 ?>
  </td>
  <td align=center>
	<?php
	if( $rubric['availability'] == "public" )
		echo $html->image('icons/green_check.gif',array('border'=>'0'));
	else
		echo $html->image('icons/red_x.gif',array('border'=>'0'));
	?>
  </td>
  <td align=center>
	<?php echo $rubric['lom_max'] ?>
  </td>
  <td align=center>
	<?php echo $rubric['criteria'] ?>
  </td>
  <td align=center>
	<?php echo $rubric['total_marks'] ?>
  </td>
  <td align=center>
    <?php
    $params = array('controller'=>'rubrics', 'userId'=>$rubric['creator_id']);
    echo $this->renderElement('users/user_info', $params);
    ?><br/>
    <?php echo date('Y-m-d H:i:s', strtotime($rubric['created'])) ?>
  </td>
  <td align=center>
    <?php
    $params = array('controller'=>'rubrics', 'userId'=>$rubric['updater_id']);
    echo $this->renderElement('users/user_info', $params);
    ?><br/>        
    <?php
        if (!empty($rubric['modified'])) echo date('Y-m-d H:i:s', strtotime($rubric['modified']));
    ?>
  </td>
</tr>
<?php $i++;?>
<?php endforeach; ?>
<?php if ($i == 0) :?>
<tr class="tablecell" align="center">
    <td colspan="9">Record Not Found</td>
</tr>  
<?php endif;?>	 
</tbody>
</table>
<table width="95%"  border="0" cellpadding="0" cellspacing="0" bgcolor="#E5E5E5">
  <tr>
	<td align=left><?php echo $html->image('layout/corner_bot_left.gif',array('align'=>'absmiddle'))?></td>
	<td align=right><?php echo $html->image('layout/corner_bot_right.gif',array('align'=>'absmiddle'))?></td>
  </tr>
</table>
<?php $pagination->loadingId = 'loading2';?>
<div id="page-numbers">
  <table width="95%"  border="0" cellspacing="0" cellpadding="4">
    <tr>
      <td width=33%><?php echo $pagination->result('Results: ')?></td>
      <td width=33%></td>
      <td width=33% align=right> 
<?php if($pagination->set($paging)):?>
        <?php echo $pagination->prev('Prev')?> <?php echo $pagination->numbers()?> <?php echo $pagination->next('Next')?>
<?php endif;?>
      </td>
    </tr>
  </table>
</div>
<!-- elements::ajax_user_list end -->
