<?php echo $javascript->link('surveys')?>
<table width="100%"  border="0" cellpadding="8" cellspacing="0" bgcolor="#FFFFFF">
  <tr>
    <td>
    <form name="frm" id="frm" method="POST" action="<?php echo $html->url(empty($params['data']['Survey']['id'])?'add':'edit') ?>">
      <h4><?php echo empty($params['data']['Survey']['id']) ? null : $html->hidden('Survey/id'); ?></h4>
      <?php echo empty($params['data']['Survey']['id']) ? $html->hidden('Survey/creator_id', array('value'=>$rdAuth->id)) : $html->hidden('Survey/updater_id', array('value'=>$rdAuth->id)); ?>        
	  <table width="95%"  border="0" align="center" cellpadding="4" cellspacing="2">
        <tr class=tableheader>
          <td colspan="3" align=center><?php echo empty($params['data']['Survey']['id'])?'Add':'Edit' ?> Survey </td>
          </tr>
        <tr class=tablecell2>
          <td width="13%">Survey Title:<font color=red>*</font></td>
          <td width="52%"><input type="hidden" name="assigned" id="assigned"/>
            <input type="text" name="name" id="name" class=input value="<?php echo empty($params['data']['Survey']['name'])? '' : $params['data']['Survey']['name'] ?>" style="width:250px;">
            <div id=surveyErr>
              <?php 
              $fieldValue = isset($this->params['form']['name'])? $this->params['form']['name'] : '';
              $params = array('controller'=>'surveys', 'data'=>null, 'fieldvalue'=>$fieldValue);
            	echo $this->renderElement('surveys/ajax_survey_validate', $params);
              ?>
            </div>
            <?php echo $ajax->observeField('name', array('update'=>'surveyErr', 'url'=>"/surveys/checkDuplicateName", 'frequency'=>1, 'loading'=>"Toggle.display('search_spinner');", 'complete'=>"Toggle.display('search_spinner');stripe();")) ?> </td>
          <td width="35%"> i.e. "CS100 Experience" </td>
        </tr>
        <tr class=tablecell2>
          <td>Assigned Course:<font color=red>*</font></td>
          <td><?php 			
              if (empty($rdAuth->courseId)) {
                $params = array('controller'=>'courses', 'courseList'=>$courseList, 'courseId'=>null, 'defaultOpt'=>1);
              } else {
                $params = array('controller'=>'courses', 'courseList'=>$courseList, 'courseId'=>null);
              }
              echo $this->renderElement('courses/course_selection_box', $params);
        ?></td>
          <td>&nbsp;</td>
        </tr>
        <tr class=tablecell2>
          <td>Due Date:<font color=red>*</font></td>
          <td><?php echo $html->input('Survey/due_date', array('size'=>'25','class'=>'input')) ?></td>
          <td> eg. YYYY-MM-DD HH:MM:SS (24 HOUR) </td>
        </tr>
        <tr class=tablecell2>
          <td valign="top">Release Date:<font color=red>*</font></td>
          <td><table width="95" border="0" cellspacing="2" cellpadding="4">
            <tr>
              <td>From:</td>
              <td><?php echo $html->input('Survey/release_date_begin', array('size'=>'25','class'=>'input')) ?></td>
            </tr>
            <tr>
              <td>To:</td>
              <td><?php echo $html->input('Survey/release_date_end', array('size'=>'25','class'=>'input')) ?></td>
            </tr>
          </table>            </td>
          <td valign="top"> eg. YYYY-MM-DD HH:MM:SS (24 HOUR) </td>
        </tr>
        <tr class=tablecell2>
          <td colspan="3" align=center><?php echo $html->submit('Update Survey') ?>
		  <input type=button name="Back" value="Back" onClick="parent.location='<?php echo $this->webroot.$this->themeWeb.$this->params['controller']; ?>'">
		  </td>
          </tr>
      </table>
      <table width="95%"  border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#E5E5E5">
        <tr>
          <td align=left><?php echo $html->image('layout/corner_bot_left.gif',array('align'=>'absmiddle'))?></td>
          <td align=right><?php echo $html->image('layout/corner_bot_right.gif',array('align'=>'absmiddle'))?></td>
        </tr>
      </table>
    </form>
	</td>
  </tr>
</table>